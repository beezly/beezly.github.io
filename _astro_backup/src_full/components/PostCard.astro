---
import type { CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

interface Props {
  post: CollectionEntry<'blog'>;
  excerpt: string;
}

const { post, excerpt } = Astro.props;
---

<article class="border-b border-gray-200 pb-8 last:border-0">
  <header class="mb-4">
    <h2 class="text-2xl font-bold mb-2">
      <a href={`/blog/${post.id}/`} class="text-gray-900 hover:text-[var(--accent)]">
        {post.data.title}
      </a>
    </h2>
    <div class="flex items-center gap-4 text-sm text-gray-600">
      <FormattedDate date={post.data.pubDate} />
      {post.data.tags && post.data.tags.length > 0 && (
        <div class="flex gap-2">
          {post.data.tags.map((tag) => (
            <span class="text-gray-500">#{tag}</span>
          ))}
        </div>
      )}
    </div>
  </header>
  <div class="prose prose-sm max-w-none text-gray-700">
    <p>{excerpt.replace(/<!--more-->/, '').trim()}</p>
  </div>
  <a
    href={`/blog/${post.id}/`}
    class="inline-block mt-4 text-[var(--accent)] hover:underline"
  >
    Read more â†’
  </a>
</article>
